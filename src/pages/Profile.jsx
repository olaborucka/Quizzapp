import { useContext } from "react";
import { useNavigate } from "react-router-dom";
import { AppContext } from "../context/AppContext";

const getCharacterIcon = (characterId) => {
    const props = { 
        xmlns: "http://www.w3.org/2000/svg", 
        viewBox: "0 0 640 640", 
        fill: "currentColor"
    };
    switch(characterId) {
        case 'character1':
            return (
                <svg {...props}>  
                        <path d="M320 72C253.7 72 200 125.7 200 192C200 258.3 253.7 312 320 312C386.3 312 440 258.3 440 192C440 125.7 386.3 72 320 72zM380 384.8C374.6 384.3 369 384 363.4 384L276.5 384C270.9 384 265.4 384.3 259.9 384.8L259.9 452.3C276.4 459.9 287.9 476.6 287.9 495.9C287.9 522.4 266.4 543.9 239.9 543.9C213.4 543.9 191.9 522.4 191.9 495.9C191.9 476.5 203.4 459.8 219.9 452.3L219.9 393.9C157 417 112 477.6 112 548.6C112 563.7 124.3 576 139.4 576L500.5 576C515.6 576 527.9 563.7 527.9 548.6C527.9 477.6 482.9 417.1 419.9 394L419.9 431.4C443.2 439.6 459.9 461.9 459.9 488L459.9 520C459.9 531 450.9 540 439.9 540C428.9 540 419.9 531 419.9 520L419.9 488C419.9 477 410.9 468 399.9 468C388.9 468 379.9 477 379.9 488L379.9 520C379.9 531 370.9 540 359.9 540C348.9 540 339.9 531 339.9 520L339.9 488C339.9 461.9 356.6 439.7 379.9 431.4L379.9 384.8z"/>
                </svg>
            );
        case 'character2':
            return (
                <svg {...props}>      
                    <path d="M320 400C394.6 400 458.4 353.6 484 288L488 288C501.3 288 512 277.3 512 264L512 184C512 170.7 501.3 160 488 160L484 160C458.4 94.4 394.6 48 320 48C245.4 48 181.6 94.4 156 160L152 160C138.7 160 128 170.7 128 184L128 264C128 277.3 138.7 288 152 288L156 288C181.6 353.6 245.4 400 320 400zM304 144L336 144C389 144 432 187 432 240C432 293 389 336 336 336L304 336C251 336 208 293 208 240C208 187 251 144 304 144zM112 548.6C112 563.7 124.3 576 139.4 576L192 576L192 528C192 510.3 206.3 496 224 496L416 496C433.7 496 448 510.3 448 528L448 576L500.6 576C515.7 576 528 563.7 528 548.6C528 488.8 496.1 436.4 448.4 407.6C412 433.1 367.8 448 320 448C272.2 448 228 433.1 191.6 407.6C143.9 436.4 112 488.8 112 548.6zM279.3 205.5C278.4 202.2 275.4 200 272 200C268.6 200 265.6 202.2 264.7 205.5L258.7 226.7L237.5 232.7C234.2 233.6 232 236.6 232 240C232 243.4 234.2 246.4 237.5 247.3L258.7 253.3L264.7 274.5C265.6 277.8 268.6 280 272 280C275.4 280 278.4 277.8 279.3 274.5L285.3 253.3L306.5 247.3C309.8 246.4 312 243.4 312 240C312 236.6 309.8 233.6 306.5 232.7L285.3 226.7L279.3 205.5zM248 552L248 576L296 576L296 552C296 538.7 285.3 528 272 528C258.7 528 248 538.7 248 552zM368 528C354.7 528 344 538.7 344 552L344 576L392 576L392 552C392 538.7 381.3 528 368 528z"/>
                </svg>
            );
        case 'character3':
            return (
                <svg {...props}>
                    <path d="M267 48C230.6 48 209.2 106.3 198.7 160L168 160C154.7 160 144 170.7 144 184C144 197.3 154.7 208 168 208L192 208L192 240C192 257 195.3 273.2 201.3 288L192 288L192 288L171.5 288C156.3 288 144 300.3 144 315.5C144 318.5 144.5 321.4 145.4 324.2L174.3 410.8C136.2 443.6 112 492.1 112 546.3C112 562.7 125.3 576 141.7 576L498.3 576C514.7 576 528 562.7 528 546.3C528 492.1 503.8 443.6 465.7 410.9L494.6 324.3C495.5 321.5 496 318.6 496 315.6C496 300.4 483.7 288.1 468.5 288.1L448 288.1L448 288.1L438.7 288.1C444.7 273.3 448 257.1 448 240.1L448 208.1L472 208.1C485.3 208.1 496 197.4 496 184.1C496 170.8 485.3 160.1 472 160.1L441.3 160.1C430.9 106.4 409.4 48.1 373 48.1C363.4 48.1 354 52 345.5 56.3C337.3 60.4 327.1 64.1 320 64.1C312.9 64.1 302.7 60.4 294.5 56.3C286 51.9 276.6 48 267 48zM360.7 532.4L335.9 461.5L363.8 429C366.5 425.8 368 421.8 368 417.6C368 407.9 360.2 400.1 350.5 400.1L289.5 400.1C279.8 400.1 272 407.9 272 417.6C272 421.8 273.5 425.8 276.2 429L304.1 461.5L279.3 532.4L222.3 352L258 352C276.4 362.2 297.5 368 320 368C342.5 368 363.6 362.2 382 352L417.7 352L360.7 532.4zM320 320C285.3 320 255.8 297.9 244.7 267C250.4 270.2 257 272 264 272L276.4 272C292.9 272 307.5 261.4 312.7 245.8C315 238.8 324.9 238.8 327.2 245.8C332.4 261.4 347.1 272 363.5 272L375.9 272C382.9 272 389.5 270.2 395.2 267C384.1 297.9 354.6 320 319.9 320z"/>
                </svg>
            );
        case 'character4':
            return (
                <svg {...props}>  
                        <path d="M448 192C448 262.7 390.7 320 320 320C262.8 320 214.4 282.5 198 230.7C196.9 232 195.8 233.3 194.5 234.5C178.7 250.3 155.7 255.2 140.9 256.6C132.8 257.4 126.3 250.9 127.1 242.8C128.5 228.1 133.4 205 149.2 189.2C155 183.4 161.8 179.1 168.8 175.8C161.8 172.6 155 168.2 149.2 162.4C133.4 146.6 128.5 123.6 127.1 108.8C126.3 100.7 132.8 94.2 140.9 95C155.6 96.4 178.7 101.3 194.5 117.1C199.3 121.9 203.2 127.5 206.2 133.2C227.5 92 270.5 63.8 320 63.8C390.7 63.8 448 121.1 448 191.8zM240 176C240 184.8 247.2 192 256 192L384 192C392.8 192 400 184.8 400 176C400 167.2 392.8 160 384 160L256 160C247.2 160 240 167.2 240 176zM238.6 387L305.6 437.2C314.1 443.6 325.9 443.6 334.4 437.2L401.4 387C407.9 382.1 416.6 380.8 424 384.2C485.4 412.4 528.1 474.4 528.1 546.3C528.1 562.7 514.8 576 498.4 576L141.7 576C125.3 576 112 562.7 112 546.3C112 474.3 154.7 412.3 216.1 384.2C223.5 380.8 232.2 382.1 238.7 387z"/>
                </svg>
            )
        default:
            return (
                <svg {...props}>
                    <path d="M320 312C386.3 312 440 258.3 440 192C440 125.7 386.3 72 320 72C253.7 72 200 125.7 200 192C200 258.3 253.7 312 320 312zM290.3 368C191.8 368 112 447.8 112 546.3C112 562.7 125.3 576 141.7 576L498.3 576C514.7 576 528 562.7 528 546.3C528 447.8 448.2 368 349.7 368L290.3 368z"/>
                </svg>
            )
    }

}


function Profile() {
    const { user, points, handleLogout, equipped, achievements } = useContext(AppContext);
    const navigate = useNavigate();
 
    //wylogowanie
    const onLogoutClick = () => {
        handleLogout();
        navigate("/");
    }

    return(
        <div className="game-container profile-screen">
            <h3>TwÃ³j profil</h3>
            <div className="profile-icon-large">
                {getCharacterIcon(equipped.character)}
            </div>
            <div className="badges-section">
                <h4>Twoje Odznaki ({achievements.length}) ğŸ†</h4>
                
                {achievements.length === 0 ? (
                    <div className="empty-badges">
                        <p>
                            Jeszcze nic nie zdobyÅ‚eÅ›. <br/>
                            Zagraj w grÄ™, aby zdobyÄ‡ pierwszÄ… odznakÄ™!
                        </p>
                    </div>
                ) : (
                    <div className="badges-grid">
                        {achievements.map(badge => (
                            <div key={badge.id} className="badge-card">
                                <div className="badge-icon">ğŸ†</div>
                                <div className="badge-name">{badge.name}</div>
                            </div>
                        ))}
                    </div>
                )}
            </div>

            <button className="logout-btn" onClick={onLogoutClick}>
                Wyloguj siÄ™
            </button>
            
        </div>
    )
}
export default Profile;